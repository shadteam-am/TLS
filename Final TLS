# SMTP –∏ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã 465 –∏ 587

–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ—á—Ç—ã –ø–æ SMTP —Å–µ–≥–æ–¥–Ω—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ **TLS (Transport Layer Security)**.  
–û–Ω–æ —Ä–µ—à–∞–µ—Ç —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏:  

- –∑–∞—â–∏—â–∞–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫—É –æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞, —à–∏—Ñ—Ä—É—è —Ç—Ä–∞—Ñ–∏–∫;  
- –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞;  
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–º–µ–Ω—É –∏–ª–∏ –∏—Å–∫–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—É—Ç–∏.  

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TLS –≤ SMTP ‚Äî **Implicit TLS** –∏ **STARTTLS**. –û–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ø–æ—Ä—è–¥–∫–æ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

---

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã SMTP —Å TLS

### –ü–æ—Ä—Ç 465 ‚Äî Implicit TLS
–ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ—Ç TLS-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ, —Ç–æ –µ—Å—Ç—å —Å –ø–µ—Ä–≤–æ–π —Å–µ–∫—É–Ω–¥—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ.  
–≠—Ç–æ—Ç —Ä–µ–∂–∏–º –∏–Ω–æ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç **SMTPS**.  

- –í—Å–µ–≥–¥–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.  
- –ù–µ—Ç —Ä–∏—Å–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.  

### –ü–æ—Ä—Ç 587 ‚Äî STARTTLS
–ó–¥–µ—Å—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ SMTP.  
–ö–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É **STARTTLS**.  
–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π —Ä–µ–∂–∏–º, –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–π –æ–±–º–µ–Ω —É–∂–µ –∏–¥—ë—Ç –ø–æ TLS.  

- –ì–∏–±–∫–æ—Å—Ç—å: –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –º–æ–≥—É—Ç –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞ –ª–µ—Ç—É.  
- –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç STARTTLS, –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±—ã—á–Ω–æ —ç—Ç–æ –∑–∞–ø—Ä–µ—â–∞—é—Ç).  

---

## –ü—Ä–∏–≤—è–∑–∫–∞ —Ä–µ–∂–∏–º–æ–≤ –∫ –ø–æ—Ä—Ç–∞–º

–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ SMTP —Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –î–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è TLS –ø–æ—à–ª–∏ –¥–≤—É–º—è –ø—É—Ç—è–º–∏:  

- –¥–ª—è **Implicit TLS** –±—ã–ª –≤—ã–¥–µ–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç 465, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É —Ä–∞–∑–ª–∏—á–∞—Ç—å –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–∞–Ω–∞–ª;  
- –¥–ª—è **STARTTLS** —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ –ø—Ä–∏–≤—ã—á–Ω—ã–π –ø–æ—Ä—Ç 587 –∏ –¥–æ–±–∞–≤–∏–ª–∏ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º.  

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:  

- **465** ‚Äî –≤—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ –∑–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (Implicit TLS);  
- **587** ‚Äî STARTTLS, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ö–æ–¥–∞ –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ SMTP –≤ TLS.  

---

## –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã ‚Äî **587 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π STARTTLS**.  
–û–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –∑–∞–∫—Ä–µ–ø–ª—ë–Ω –∑–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π.  
–ü–æ—Ä—Ç 465 —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–Ω–æ–≥–∏–º–∏ –ø–æ—á—Ç–æ–≤—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, –æ–¥–Ω–∞–∫–æ –µ–≥–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç —Ä–µ–∂–µ.  

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Implicit TLS –∏ STARTTLS

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞                | –ü–æ—Ä—Ç **465** (Implicit TLS)                          | –ü–æ—Ä—Ç **587** (STARTTLS) |
|-------------------------------|------------------------------------------------------|------------------------------------------------------------------------|
| –ö–∞–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞—â–∏—Ç–∞    | –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏          | –°–Ω–∞—á–∞–ª–∞ –æ–±—ã—á–Ω–æ–µ SMTP, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ TLS –ø–æ –∫–æ–º–∞–Ω–¥–µ STARTTLS         |
| –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è | –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞ ‚Äî –≤—Å—ë –∑–∞—â–∏—â–µ–Ω–æ —Å –ø–µ—Ä–≤–æ–π —Å–µ–∫—É–Ω–¥—ã           | –í–æ–∑–º–æ–∂–Ω–∞, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä/–∫–ª–∏–µ–Ω—Ç –Ω–µ –≤–∫–ª—é—á–∞—Ç STARTTLS (–Ω–æ –æ–±—ã—á–Ω–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ) |
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                    | –†–µ–∂–∏–º SMTPS (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç –¥–ª—è TLS)     | –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã (submission)                          |
| –ì–∏–±–∫–æ—Å—Ç—å                      | –¢–æ–ª—å–∫–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ                      | –ú–æ–∂–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ ¬´–Ω–∞ –ª–µ—Ç—É¬ª                                 |
| –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏      | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ —Ä–µ–∂–µ                                | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç                                         |

---

## –°—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### SMTP —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 465 (Implicit TLS)
1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø–æ—Ä—Ç—É 465  
2. –°—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è TLS-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ  
3. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (–∑–∞—â–∏—â–µ–Ω–æ)  
4. –û–±–º–µ–Ω SMTP-–∫–æ–º–∞–Ω–¥–∞–º–∏  

### SMTP —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 587 (STARTTLS)
1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø–æ—Ä—Ç—É 587  
2. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ–±—ã—á–Ω–æ–µ SMTP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ  
3. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É STARTTLS  
4. TLS-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ  
5. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –≤ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π —Ä–µ–∂–∏–º  
6. –û–±–º–µ–Ω SMTP-–∫–æ–º–∞–Ω–¥–∞–º–∏  


### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ SMTP-–ø–æ—Ä—Ç–æ–≤

–ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã.

üîπ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç **587**:

nc -zv smtp.gmail.com 587


–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏:

Connection to smtp.gmail.com 587 port [tcp/smtp] succeeded!


üí° –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä–Ω—É–ª–∞ –æ—à–∏–±–∫—É, –∑–Ω–∞—á–∏—Ç –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç (—á–∞—Å—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º –∏–ª–∏ —Ñ–∞–π—Ä–≤–æ–ª–æ–º).

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç **465**:

nc -zv smtp.gmail.com 465

üîπ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É **STARTTLS**:

openssl s_client -starttls smtp -connect smtp.gmail.com:587


–ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ SMTP-—Å–µ—Ä–≤–µ—Ä—É –∏ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ STARTTLS.
–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, —Ü–µ–ø–æ—á–∫—É –¥–æ–≤–µ—Ä–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TLS.

–°–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

250-mail.gmail.com at your service
250-STARTTLS
...
Verify return code: 0 (ok)


üí° –ï—Å–ª–∏ –≤–∏–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ 250-STARTTLS –∏ –≤ –∫–æ–Ω—Ü–µ **Verify return code: 0 (ok)**, –∑–Ω–∞—á–∏—Ç —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.
